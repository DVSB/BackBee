(function(e){"use strict";var t={_stateContext:"",_user_preferences:{},buildAccessors:function(e){var t=e.charAt(0).toUpperCase();this["setState"+t+e.substr(1)]=function(t){this.setState(e.toString(),t)};this["getState"+t+e.substr(1)]=function(){return this.getState(e.toString())}},register:function(t){this._stateContext=t;this._user_preferences=new e.UserPreferences;for(var n in this._statesWatchable){this.buildAccessors(n,this._statesWatchable[n])}},stateRestorer:function(e,t){t(this,e)},restore:function(){var e;for(var t in this._statesRestore){e="";e=this._user_preferences.getValue(this._stateContext,t,this._statesWatchable[t]);this.stateRestorer(e,this._statesRestore[t])}},setState:function(e,t){if(e in this._statesInterpretor){t=this._statesInterpretor[e](this,t)}this._user_preferences.setValue(this._stateContext,e,t)},getState:function(e){var t=this._user_preferences.getValue(this._stateContext,e,this._statesWatchable[e]);return t}};var n=function(e,n){if(!n){n="object_undefined"}if(!("_statesRestore"in e)){e._statesRestore={}}if(!("_statesInterpretor"in e)){e._statesInterpretor={}}if(!("_statesWatchable"in e)){if(console){console.error("the "+n+"object must be have a _statesWatchable object in this own property.")}}else{for(var r in t){if(!e.hasOwnProperty(r)){e[r]=t[r]}}e.register(n);e.restore()}return e};e.StateManager=t;e.StateManager.extend=n})(bb)